"use strict";(self["webpackChunksa1"]=self["webpackChunksa1"]||[]).push([[79],{4079:function(t,a,r){r.r(a),r.d(a,{default:function(){return v}});var e=function(){var t=this,a=t._self._c;return a("div",{staticClass:"sz"},[a("div",{staticClass:"top"},[t._v(" 加攻至上限所需兵数计算 ")]),a("el-form",{ref:"ruleForm",attrs:{model:t.formCondition,"label-width":"15vw","status-icon":"",rules:t.rules}},[a("el-tooltip",{attrs:{content:"要计算的攻击值",placement:"top"}},[a("el-form-item",{attrs:{label:"攻击:",prop:"InitialAtk"}},[a("el-input",{on:{input:t.setUpperLimitValue},model:{value:t.formCondition.InitialAtk,callback:function(a){t.$set(t.formCondition,"InitialAtk",t._n(a))},expression:"formCondition.InitialAtk"}})],1)],1),a("el-tooltip",{attrs:{content:"当前精兵简政等级",placement:"top"}},[a("el-form-item",{attrs:{label:"精兵:",prop:"pickedTroops"}},[a("el-input",{attrs:{maxlength:2},on:{input:t.pickedTroopsChange},model:{value:t.formCondition.pickedTroops,callback:function(a){t.$set(t.formCondition,"pickedTroops",t._n(a))},expression:"formCondition.pickedTroops"}})],1)],1),a("el-tooltip",{attrs:{content:0==t.formCondition.isSun?"未处于夏天":"处于(夏天/永恒之夏)基础加20%攻击",placement:"top"}},[a("el-form-item",{attrs:{label:"夏天:"}},[a("div",{staticClass:"rP"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"100","inactive-value":!1,"active-value":!0},on:{change:t.setMulriple},model:{value:t.formCondition.isSun,callback:function(a){t.$set(t.formCondition,"isSun",a)},expression:"formCondition.isSun"}})],1)])],1),a("el-tooltip",{attrs:{content:0==t.formCondition.isCorrectionFactor?"未开启修正系数":"开启修正初始修正系数为6/5.5",placement:"top"}},[a("el-form-item",{attrs:{label:"修正:",inline:!0,prop:"correctionFactor"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("div",{staticClass:"cFBox"},[a("el-input",{on:{focus:function(a){t.formCondition.correctionFactor=""},blur:function(a){return t.setCorrectionFactor(t.formCondition.correctionFactor)}},model:{value:t.formCondition.correctionFactor,callback:function(a){t.$set(t.formCondition,"correctionFactor",t._n(a))},expression:"formCondition.correctionFactor"}}),a("el-button",{attrs:{type:"warning"},on:{click:t.setInitClick}},[t._v("初始")]),a("div",{staticClass:"rP"},[a("el-switch",{attrs:{"active-color":"#13ce66","inactive-color":"#ff4949","active-value":"100","inactive-value":"0"},on:{input:function(a){return t.setCorrectionFactor(t.formCondition.correctionFactor)}},model:{value:t.formCondition.isCorrectionFactor,callback:function(a){t.$set(t.formCondition,"isCorrectionFactor",a)},expression:"formCondition.isCorrectionFactor"}})],1)],1)]}}])})],1)],1),a("el-table",{staticClass:"tB",staticStyle:{width:"100%"},attrs:{data:t.armData,"max-height":"100vh"},on:{"row-click":t.setArms}},[a("el-table-column",{attrs:{align:"center",prop:"armName",label:"兵种名"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("el-tooltip",{attrs:{content:"点击此行设置兵种属性",placement:"top"}},[a("div",[t._v(t._s(r.row.armName))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"mulriple",label:"倍数"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("el-tooltip",{attrs:{content:"当前倍数",placement:"top"}},[a("div",[t._v(t._s(r.row.mulriple))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"upperLimitValue",label:"加攻上限"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("el-tooltip",{attrs:{content:"当前加攻上限",placement:"top"}},[a("div",[t._v(t._s(r.row.upperLimitValue))])])]}}])}),a("el-table-column",{attrs:{align:"center",prop:"amount",label:"所需兵数"},scopedSlots:t._u([{key:"default",fn:function(r){return[a("el-tooltip",{attrs:{content:"结果已去除自身及精兵倍数",placement:"top"}},[a("div",[t._v(t._s(r.row.amount))])])]}}])})],1),a("DetailsOfArms",{attrs:{armDataS:t.armDataS,bIsShow:t.bIsShow},on:{setShow:a=>t.bIsShow=a,callData:t.setCallData}})],1)},i=[],o=(r(560),function(){var t=this,a=t._self._c;return void 0!=this.armDataS.iArmData?a("div",{staticClass:"DetailsOfArms"},[a("el-dialog",{attrs:{title:t.armsData.armName,visible:t.isShow,width:"70%",center:""},on:{"update:visible":function(a){t.isShow=a},close:t.clickIsShow}},[a("el-form",{attrs:{"label-position":"right","label-width":"10vw",model:t.armsData}},[a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.armsData.aId,expression:"armsData.aId == 1"}],staticClass:"cfB",attrs:{label:"觉醒"}},[a("el-rate",{attrs:{"show-text":"",max:3,texts:t.textList,"text-color":"#1F2D3D"},model:{value:t.armsData.iArmData.arousalLevel,callback:function(a){t.$set(t.armsData.iArmData,"arousalLevel",a)},expression:"armsData.iArmData.arousalLevel"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.armsData.aId,expression:"armsData.aId == 1"}],attrs:{label:"攻击"}},[a("el-input",{attrs:{maxlength:10},model:{value:t.armsData.iArmData.atk,callback:function(a){t.$set(t.armsData.iArmData,"atk",t._n(a))},expression:"armsData.iArmData.atk"}})],1),a("el-form-item",{attrs:{label:"生命"}},[a("el-input",{attrs:{maxlength:10},model:{value:t.armsData.iArmData.hp,callback:function(a){t.$set(t.armsData.iArmData,"hp",t._n(a))},expression:"armsData.iArmData.hp"}})],1),a("el-form-item",{directives:[{name:"show",rawName:"v-show",value:1==t.armsData.aId,expression:"armsData.aId == 1"}],attrs:{label:"武器"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.armsData.iArmData.weaponry,callback:function(a){t.$set(t.armsData.iArmData,"weaponry",a)},expression:"armsData.iArmData.weaponry"}},t._l(t.weaponryList[(t.armsData.aId+"").split("")[0]-1].data,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1),a("el-form-item",{attrs:{label:"防具"}},[a("el-select",{attrs:{placeholder:"请选择"},model:{value:t.armsData.iArmData.armor,callback:function(a){t.$set(t.armsData.iArmData,"armor",a)},expression:"armsData.iArmData.armor"}},t._l(t.armorList[(t.armsData.aId+"").split("")[0]-1].data,(function(t){return a("el-option",{key:t.id,attrs:{label:t.name,value:t.id}})})),1)],1)],1)],1)],1):t._e()}),l=[],n={name:"DetailsOfArms",props:["bIsShow","armDataS"],data(){return{isShow:this.bIsShow,armsData:this.armDataS,textList:["简单","完美","极限"],weaponryList:[{armId:"Q",data:[{id:"Qw1",name:"兽王剑"},{id:"Qw2",name:"石中剑"},{id:"Qw3",name:"短木剑"}]},{armId:"Z",data:[{id:"Zw1",name:"其他"}]}],armorList:[{armId:"Q",data:[{id:"Qa1",name:"军旗-杀"},{id:"Qa2",name:"军旗-风"},{id:"Qa3",name:"其他"}]},{armId:"Z",data:[{id:"Za1",name:"弑神号角"},{id:"Za2",name:"其他"}]}]}},methods:{clickIsShow(t){this.isShow=!this.isShow,this.$emit("setShow",!1),this.$emit("callData",this.armsData)}},watch:{bIsShow(t,a){this.isShow=t},armDataS(t){this.armsData=t}}},s=n,m=r(1001),u=(0,m.Z)(s,o,l,!1,null,null,null),c=u.exports;let p={Qw3:()=>0,Zw1:()=>0,Qa3:()=>0,Za2:()=>0,Qw1:()=>1,Qw2:t=>{let a="";return a=Number(1).add(t.iArmData.atk.mul(.1).mul(.04)).add(Math.floor(t.iArmData.hp.div(900))),a},Qa1:t=>{let a="";return a=Number(1).add(Math.floor(t.iArmData.hp.div(Number(400)))),a},Qa2:t=>{let a="";return a=Number(1).add(Math.floor(t.iArmData.hp.div(Number(1200)))),a},Za1:t=>{let a="";return a=1==t.isFive?Number(1).add(Math.floor(t.iArmData.hp.div(Number(1800)))).mul(5):Number(1).add(Math.floor(t.iArmData.hp.div(Number(1800)))).mul(1),a},awakeningCalculate:t=>{let a=0;return 1==t.aId&&(a=Number(t.iArmData.atk).mul(.1).mul(Number(t.iArmData.arousalLevel).mul(50).mul(.002))),a}};var d=p,h={name:"SAjg",components:{DetailsOfArms:c},data(){return{formCondition:{InitialAtk:0,pickedTroops:0,isSun:!1,isCorrectionFactor:!1,correctionFactor:6/5.5},armData:[{aId:1,armName:"轻步兵",mulriple:10,upperLimitValue:0,iArmData:{arousalLevel:0,atk:0,hp:0,weaponry:"Qw1",armor:"Qa1"},amount:0,isM:!0},{aId:2,armName:"5倍重骑兵",mulriple:12,upperLimitValue:0,isFive:!0,iArmData:{arousalLevel:0,atk:0,hp:0,weaponry:"Zw1",armor:"Za1"},amount:0,isM:!0},{aId:21,armName:"5倍重骑兵",mulriple:2.4,upperLimitValue:0,isFive:!0,iArmData:{arousalLevel:0,atk:0,hp:0,weaponry:"Zw1",armor:"Za1"},amount:0,isM:!1},{aId:22,armName:"无5倍重骑兵",mulriple:2.4,upperLimitValue:0,isFive:!1,iArmData:{arousalLevel:0,atk:0,hp:0,weaponry:"Zw1",armor:"Za1"},amount:0,isM:!1}],bIsShow:!1,armDataS:"",rules:{InitialAtk:[{validator:(t,a,r)=>{let e=[];if(!a&&0!==a)return r(new Error("加攻数值不能为空"));if(a<0)return setTimeout((()=>{this.formCondition.InitialAtk=0}),500),r(new Error("加攻数值不能为负数"));if((a+"").split("").length>=10){for(let t=0;t<10;t++)e.push((a+"").split("")[t]);return this.formCondition.InitialAtk=Number(e.join("")),r(new Error("输入最大字符为10位"))}return r()},trigger:"change"}],pickedTroops:[{validator:(t,a,r)=>a||0===a?a<0?(setTimeout((()=>{this.formCondition.pickedTroops=0}),1e3),r(new Error("精兵不能为负数"))):a>50?(setTimeout((()=>{this.formCondition.pickedTroops=50}),1e3),r(new Error("精兵加成最高为50级"))):r():r(new Error("加攻数值不能为空")),trigger:"change"}],correctionFactor:[{validator:(t,a,r)=>{let e=[];if(!a&&0!==a)return r(new Error("修正系数不能为空"));if(a<0)return setTimeout((()=>{this.formCondition.correctionFactor=0}),1e3),r(new Error("修正系数不能为负数"));if((a+"").split("").length>=20){for(let t=0;t<20;t++)e.push((a+"").split("")[t]);return this.formCondition.correctionFactor=Number(e.join("")),r(new Error("修正系数最大字符为20位"))}return r()},trigger:"change"}]}}},methods:{setUpperLimitValue(){this.armData.map(((t,a)=>(this.armData[a].upperLimitValue=Math.round(t.mulriple.mul(this.formCondition.InitialAtk)),t))),this.comResult()},pickedTroopsChange(){this.comResult()},setMulriple(){this.armData.map(((t,a)=>t.isM?0!=this.formCondition.isSun?(console.log("aitem.mulriple",t.mulriple),t.mulriple=Number(t.mulriple).mul(1.2),this.armData[a].upperLimitValue=Math.round(t.mulriple.mul(this.formCondition.InitialAtk)),t):(console.log("sitem.mulriple",t.mulriple),t.mulriple=Number(t.mulriple).div(1.2),this.armData[a].upperLimitValue=Math.round(t.mulriple.mul(this.formCondition.InitialAtk)),t):t)),this.comResult()},setCorrectionFactor(t){""!=t&&t||(this.formCondition.correctionFactor=Number(6).div(5.5)),this.comResult()},setInitClick(){this.formCondition.correctionFactor=Number(6).div(5.5),this.comResult()},setArms(t){this.armDataS=t,this.bIsShow=!this.bIsShow},setCallData(t){this.armData.map((a=>((a.aId+"").split("")[0]==(t.aId+"").split("")[0]&&(a.iArmData=t.iArmData),a))),this.comResult()},comResult(){this.armData.map(((t,a)=>{this.armData[a].amount=0;let r=0;if(!this.formCondition.InitialAtk)return r=0,t.amount=r,t;let e=0==this.formCondition.isCorrectionFactor?1:this.formCondition.correctionFactor,i=0,o=this.formCondition.pickedTroops.mul(.1);return i=1==this.formCondition.isSun&&t.mulriple>=10?Number(t.mulriple).sub(Number(1.2).add(o)):0==this.formCondition.isSun&&t.mulriple>=10?Number(t.mulriple).sub(Number(1).add(o)):Number(t.mulriple),"Qw1"!=t.iArmData.weaponry&&"Qa1"==t.iArmData.armor?(console.log("multipleS",i),r=Math.ceil(this.formCondition.InitialAtk.mul(i).div(d[t.iArmData.weaponry](t).add(0).add(d.awakeningCalculate(t))).mul(e))):"Za2"==t.iArmData.armor?r="该防具无加攻值":(console.log("multipleS",i),r=Math.ceil(this.formCondition.InitialAtk.mul(i).div(d[t.iArmData.weaponry](t).add(d[t.iArmData.armor](t)).add(d.awakeningCalculate(t))).mul(e))),t.amount=r,t}))}},mounted(){let t=this.$store.state.JGDataS;null!=t&&(this.formCondition=this.$store.state.JGDataS.jgForm,this.armData=this.$store.state.JGDataS.jgTb)},beforeUpdate(){this.$store.commit("Set_JG_Data",{jgForm:this.formCondition,jgTb:this.armData})}},f=h,D=(0,m.Z)(f,e,i,!1,null,null,null),v=D.exports}}]);